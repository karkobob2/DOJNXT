<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harmonogram Rozpraw | Department of Justice | Los Santos</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style/base.css">
    <link rel="stylesheet" href="style/layout.css">
    <link rel="stylesheet" href="style/components.css">
    <link rel="stylesheet" href="style/hero.css">
    <link rel="stylesheet" href="style/about.css">
    <link rel="stylesheet" href="style/documents.css">
    <link rel="stylesheet" href="style/schedule.css">
    <link rel="stylesheet" href="style/archive.css">
    <link rel="stylesheet" href="style/gallery.css">
    <link rel="stylesheet" href="style/recruitment.css">
    <link rel="stylesheet" href="style/footer.css">
    <link rel="stylesheet" href="style/mobile.css">
</head>

<body>
    <a class="skip-link" href="#maincontent">Przejdź do treści</a>
    <div class="loader">
        <div class="loader-icon"></div>
    </div>
    <div class="overlay" id="overlay"></div>

    <nav id="navbar" role="navigation" aria-label="Główna nawigacja">
        <div class="nav-container">
            <a href="index.html#home" class="logo"><i class="fas fa-balance-scale"></i> DOJ</a>
            <ul class="nav-links">
                <li><a href="index.html#home">Strona Główna</a></li>
                <li><a href="about.html">O Nas</a></li>
                <li><a href="documents.html">Dokumenty</a></li>
                <li><a href="schedule.html">Harmonogram</a></li>
                <li><a href="archive.html">Archiwum</a></li>
                <li><a href="index.html#recruitment">Rekrutacja</a></li>
            </ul>
            <button class="hamburger" id="hamburger">
                <span></span><span></span><span></span>
            </button>
        </div>
    </nav>

    <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
        <a href="index.html#home">Strona Główna</a>
        <a href="about.html">O Nas</a>
        <a href="documents.html">Dokumenty</a>
        <a href="schedule.html">Harmonogram</a>
        <a href="archive.html">Archiwum</a>
        <a href="index.html#recruitment">Rekrutacja</a>
    </div>

    <a id="maincontent" tabindex="-1"></a>

    <section class="schedule" id="schedule">
        <div class="section-header fade-in">
            <h2>Harmonogram Rozpraw</h2>
            <p>Przewidywane rozprawy sądowe w Los Santos</p>
        </div>
        <div class="schedule-controls fade-in">
            <input type="text" id="scheduleFilter" class="schedule-search" placeholder="Szukaj rozprawy...">
            <select id="scheduleSort" class="schedule-sort">
                <option value="date-asc">Data: Od najwcześniejszej</option>
                <option value="date-desc">Data: Od najnowszej</option>
                <option value="judge">Sędzia</option>
            </select>
        </div>
        <div class="schedule-grid" id="scheduleGrid">
            <div class="empty-state fade-in">
                <i class="fas fa-calendar-times"></i>
                <h3>Brak zaplanowanych rozpraw</h3>
                <p>Rozprawy będą dodawane przez bota Discord Server. Bądź na bieżąco!</p>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>Department of Justice</h4>
                <p>Oficjalny strona Departamentu Sprawiedlowości w Los Santos <br> NXTRP 2.0</p>
            </div>
            <div class="footer-section">
                <h4>Szybkie linki</h4>
                <a href="index.html#home">Strona główna</a>
                <a href="index.html#documents">Dokumenty</a>
                <a href="index.html#recruitment">Rekrutacja</a>
            </div>
            <div class="footer-section">
                <h4>Kontakt</h4>
                <a href="https://discord.gg/rDNfymcqYW" target="_blank" rel="noopener noreferrer"><i class="fab fa-discord"></i> Discord Server</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 NXTRP 2.0 - DOJ. Wszelkie prawa zastrzeżone.</p>
        </div>
    </footer>

    <script>
        (function() {
            const navLinks = document.querySelectorAll('.nav-links a');
            const current = location.pathname.split('/').pop() || 'index.html';
            navLinks.forEach(a => {
                const href = a.getAttribute('href');
                if (href === current || href === 'schedule.html') {
                    a.classList.add('active');
                    a.setAttribute('aria-current', 'page');
                }
            });

            const hamburger = document.getElementById('hamburger');
            const mobileMenu = document.getElementById('mobileMenu');
            if (hamburger && mobileMenu) {
                hamburger.setAttribute('aria-expanded', 'false');
                hamburger.addEventListener('click', () => {
                    const open = mobileMenu.classList.toggle('open');
                    hamburger.classList.toggle('open', open);
                    hamburger.setAttribute('aria-expanded', String(open));
                    mobileMenu.setAttribute('aria-hidden', String(!open));
                });
                mobileMenu.querySelectorAll('a').forEach(a => a.addEventListener('click', () => {
                    mobileMenu.classList.remove('open');
                    hamburger.classList.remove('open');
                    hamburger.setAttribute('aria-expanded', 'false');
                    mobileMenu.setAttribute('aria-hidden', 'true');
                }));
                document.addEventListener('keydown', (ev) => {
                    if (ev.key === 'Escape') {
                        mobileMenu.classList.remove('open');
                        hamburger.classList.remove('open');
                        hamburger.setAttribute('aria-expanded', 'false');
                        mobileMenu.setAttribute('aria-hidden', 'true');
                    }
                });
            }

            async function loadSchedule() {
                const grid = document.getElementById('scheduleGrid');
                try {
                    const res = await fetch('/api/schedule');
                    if (!res.ok) throw new Error('no-data');
                    const items = await res.json();
                    if (!Array.isArray(items) || items.length === 0) return;
                    grid.innerHTML = '';
                    items.forEach(it => {
                        const card = document.createElement('div');
                        card.className = 'trial-card fade-in';
                        card.innerHTML = `
                            <div class="trial-badge">${it.room || 'Sala'}</div>
                            <h3 class="trial-title">${it.name || ''}</h3>
                            <div class="trial-info">
                                <div class="trial-info-row"><div class="trial-info-label">Sędzia</div><div class="trial-info-value">${it.judge || ''}</div></div>
                                <div class="trial-info-row"><div class="trial-info-label">Data</div><div class="trial-info-value">${it.date || ''} ${it.time || ''}</div></div>
                            </div>
                            <p class="trial-description">${it.description || ''}</p>
                        `;
                        grid.appendChild(card);
                    });
                } catch (e) {
                    console.warn('No schedule API or failed to load:', e);
                }
            }
            loadSchedule();
        })();
    </script>

    <script src="js/core.js"></script>
    <script src="js/schedule.js"></script>
    <script src="js/archive.js"></script>
    <script src="js/api.js"></script>
</body>

</html>